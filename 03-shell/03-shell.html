<!DOCTYPE html>
<html>
  <head>
    <title>Lecture 3: Learning to love the shell</title>
    <meta charset="utf-8">
    <meta name="author" content="Grant McDermott | University of Oregon" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis.css" rel="stylesheet" />
    <link href="libs/remark-css/metropolis-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Lecture 3: Learning to love the shell
## <html>
<div style="float:left">

</div>
<hr color='#EB811B' size=1px width=796px>
</html>
### Grant McDermott | University of Oregon
### EC 607

---




class: inverse, center, middle

# Prologue
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---

# Checklist

☑ Have you cloned the course lecture repo to your local machine?

☑ Once that's done, pull to get the latest lecture slides.


Recommended: Spruce up your GitHub profiles. 
- Add your full name, a profile picture, link to website, etc.
- No-one wants to work with (or hire) a barcode.

--

&lt;/br&gt;

Today's lecture is the last detour before we get back to data analyis with R and RStudio.
- Laying proper foundations with Git and the shell will put us in a strong positon for advanced data science work as the course develops.

---

class: inverse, center, middle

# Intro
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---

# The Unix philosophy

The shell tools that we're going to be using today have their roots in the [Unix](https://en.wikipedia.org/wiki/Unix) family of operating systems originally developed at Bells Labs in the 1970s.

Besides paying homage, acknowledging the Unix lineage is important because these tools still embody the "[Unix philosophy](https://en.wikipedia.org/wiki/Unix_philosophy)":

&gt; **Do One Thing And Do It Well** 

--

The DOTADIW ideal can be applied across the computing spectrum: commands, functions, programs, etc.
- By pairing and chaining well-designed individual components, we can build powerful and much more complex larger systems.
- You can see why the Unix philosophy is also referred to as "minimalist and modular".
  
Again, this philosophy is very clearly expressed in the design and functionality of the Unix shell.

---

# Definitions

Don't be thrown off by terminology: The "shell", "terminal", "tty", "command prompt", etc. 
- These are all basically&lt;sup&gt;1&lt;/sup&gt; just different names for the same thing.
- They are all referring to a *command line interface* (CLI).
  
There are many shell variants&lt;sup&gt;2&lt;/sup&gt;, but we're going to focus on [**Bash**](https://www.gnu.org/software/bash/) (i.e. **B**ourne **a**gain **sh**ell).
- Default shell on Linux and MacOS.
- Windows users should have installed it via Git for Windows ([here](https://gitforwindows.org/)), or the new Windows Subsystem for Linux ([here](https://docs.microsoft.com/en-us/windows/wsl/install-win10" target)).


.footnote[
&lt;sup&gt;1&lt;/sup&gt; [Truth be told](https://unix.stackexchange.com/questions/4126/what-is-the-exact-difference-between-a-terminal-a-shell-a-tty-and-a-con), there are some subtle and sometimes important differences, as well as some interesting history behind the names. But we can safely ignore these here.

&lt;sup&gt;2&lt;/sup&gt; For the record, I primarily use the Z shell (zsh) in my day-to-day work, which is why it might look [somewhat different](https://ohmyz.sh/) to yours during live coding sessions.
]


---

# Why bother with the shell?

1. Power
  - Both for executing commands and for fixing problems. There are some things you just can't do in an IDE or GUI.
  - It also avoids memory complications associated with certain applications and/or IDEs. We'll get to this issue later in the course.
2. Reproducibility
 - Scripting is reproducible, while clicking is not.
3. Interacting with servers and super computers
  - The shell is often the only game in town for high performance computing. We'll get to this later in the course.
4. Automating workflow and analysis pipelines
  - Easily track and reproduce an entire project (e.g. use a Makefile to combine multiple programs, scripts, etc.)

--

We're going to focus on 1, 2 and 3 in this course. That's not to say that 4 is unimportant (far from it), but we just won't have time to cover it. 
- [Here](http://stat545.com/Classroom/notes/cm109.nb.html), [here](https://ropenscilabs.github.io/drake-manual/index.html), and [here](https://web.stanford.edu/~gentzkow/research/CodeAndData.pdf) are great places to learn about automation on your own if you're interested.

---
class: inverse, center, middle

# Bash shell basics
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---

# First look

Open up your Bash shell. 
- [Linux](https://www.wikihow.com/Open-a-Terminal-Window-in-Ubuntu) (You already know what you're doing, but still...)
- [Mac](https://www.techwalla.com/articles/how-to-open-terminal-on-a-macbook)
- [Windows](https://www.howtogeek.com/265900/everything-you-can-do-with-windows-10s-new-bash-shell/)

You can also access the Bash shell through RStudio, by clicking on the "Terminal" tab of the bottom-left window pane (i.e. next to the "Console" tab).
- This should run Bash by default if it is installed on your system. See [here](https://support.rstudio.com/hc/en-us/articles/115010737148-Using-the-RStudio-Terminal) for more details.

---

# First look (cont.)

You should see something like:

```bash
 username@hostname:~$
```

--

This is shell-speak for: "Who am I and where am I?"
  &lt;!-- - Type in `$ whoami` without the leading dollar sign to confirm. --&gt;

---
count: false

# First look (cont.)

You should see something like:

```bash
 `username`@hostname:~$ 
```

This is shell-speak for: "Who am I and where am I?"

- `username` denotes a specific user (one of potentially many on this computer). 


---
count: false

# First look (cont.)

You should see something like:

```bash
 username`@hostname`:~$ 
```

This is shell-speak for: "Who am I and where am I?"

- `username` denotes a specific user (one of potentially many on this computer). 

- `@hostname` denotes the name of the computer or server.

---
count: false

# First look (cont.)

You should see something like:

```bash
 username@hostname`:~`$ 
```

This is shell-speak for: "Who am I and where am I?"

- `username` denotes a specific user (one of potentially many on this computer). 

- `@hostname` denotes the name of the computer or server.

- `:~` denotes the directory path (where `~` signifies the user's home directory).


---
count: false

# First look (cont.)

You should see something like:

```bash
 username@hostname:~`$`
```

This is shell-speak for: "Who am I and where am I?"

- `username` denotes a specific user (one of potentially many on this computer). 

- `@hostname` denotes the name of the computer or server.

- `:~` denotes the directory path (where `~` signifies the user's home directory).

- `$` denotes the start of the command prompt.
  - We'll get to this later, but for a special "superuser" called root, the dollar sign will change to a `#`.

---

# Useful keyboard shortcuts

- `Tab` completion.

- Use the `↑` (and `↓`) keys to scroll through previous commands.

- `Ctrl`+`→` (and `Ctrl`+`←`) to skip whole words at a time.

- `Ctrl`+`a` moves the cursor to the beginning of the line.

- `Ctrl`+`e` moves the cursor to the end of the line.

- `Ctrl`+`k` deletes everything to the right of the cursor.

- `Ctrl`+`u` deletes everything to the left of the cursor.

- `Ctrl`+`Shift`+`c` to copy and `Ctrl`+`Shift`+`v` to paste.

- `clear` to clear your terminal.

---

# Syntax

All Bash commands have the same basic syntax:

**&lt;center&gt;command option(s) argument(s)&lt;/center&gt;**

Examples:

  ```bash
  $ ls -lh ~/Documents/
  ```
  ```bash
  $ sort -u myfile.txt
  ```

---
count: false

# Syntax

All Bash commands have the same basic syntax:

**&lt;center&gt;&lt;span style='background: #ffff88;'&gt;command&lt;/span&gt; option(s) argument(s)&lt;/center&gt;**

Examples:

  ```bash
  $ `ls` -lh ~/Documents/
  ```
  ```bash
  $ `sort` -u myfile.txt
  ```

---
count: false

# Syntax

All Bash commands have the same basic syntax:

**&lt;center&gt;command &lt;span style='background: #ffff88;'&gt;option(s)&lt;/span&gt; argument(s)&lt;/center&gt;**

Examples:

  ```bash
  $ ls `-lh` ~/Documents/
  ```
  ```bash
  $ sort `-u` myfile.txt
  ```


---
count: false

# Syntax

All Bash commands have the same basic syntax:

**&lt;center&gt;command option(s) &lt;span style='background: #ffff88;'&gt;argument(s)&lt;/span&gt;&lt;/center&gt;**

Examples:

  ```bash
  $ ls -lh `~/Documents/`
  ```
  ```bash
  $ sort -u `myfile.txt`
  ```

--

&lt;/br&gt;

**commands**
- You don't always need options or arguments. (E.g. `$ ls ~/Documents/` and `$ ls -lh` are both valid commands that will yield output.)
- However, you always need a command.

---

# Syntax (cont.)

**options** (also called **flags**)
- Start with a dash.
- Usually one letter.
- Multiple options can be chained together under a single dash.
  ```bash
  $ ls -l -a -h /var/log ## This works
  $ ls -lah /var/log ## So does this
  ```
- An exception is with (rarer) options requiring two dashes.
  ```bash
  $ ls --group-directories-first --human-readable /var/log
  ```

**arguments**
- Tell the command *what* to operate on.
- Usually a file, path, or a set of files and folders.

---

# Help

The `man` command ("manual pages") is your friend if you ever need help.
- Tip: Hit spacebar to scroll down a page at a time, "h" to see the help notes of the `man` command itself and "q" to quit.


```bash
$ man ls
```

```
## LS(1)                            User Commands                           LS(1)
## 
## NAME
##        ls - list directory contents
## 
## SYNOPSIS
##        ls [OPTION]... [FILE]...
## 
## DESCRIPTION
##        List  information  about  the FILEs (the current directory by default).
##        Sort entries alphabetically if none of -cftuvSUX nor --sort  is  speci‐
##        fied.
## 
##        Mandatory  arguments  to  long  options are mandatory for short options
##        too.
## 
##        -a, --all
##               do not ignore entries starting with .
## 
##        -A, --almost-all
##               do not list implied . and ..
## 
##        --author
##               with -l, print the author of each file
## 
##        -b, --escape
##               print C-style escapes for nongraphic characters
## 
##        --block-size=SIZE
##               with  -l,  scale  sizes  by  SIZE  when  printing  them;   e.g.,
##               '--block-size=M'; see SIZE format below
## 
##        -B, --ignore-backups
##               do not list implied entries ending with ~
## 
##        -c     with -lt: sort by, and show, ctime (time of last modification of
##               file status information); with -l: show ctime and sort by  name;
##               otherwise: sort by ctime, newest first
## 
##        -C     list entries by columns
## 
##        --color[=WHEN]
##               colorize  the output; WHEN can be 'always' (default if omitted),
##               'auto', or 'never'; more info below
## 
##        -d, --directory
##               list directories themselves, not their contents
## 
##        -D, --dired
##               generate output designed for Emacs' dired mode
## 
##        -f     do not sort, enable -aU, disable -ls --color
## 
##        -F, --classify
##               append indicator (one of */=&gt;@|) to entries
## 
##        --file-type
##               likewise, except do not append '*'
## 
##        --format=WORD
##               across -x, commas -m, horizontal -x, long -l, single-column  -1,
##               verbose -l, vertical -C
## 
##        --full-time
##               like -l --time-style=full-iso
## 
##        -g     like -l, but do not list owner
## 
##        --group-directories-first
##               group directories before files;
## 
##               can   be  augmented  with  a  --sort  option,  but  any  use  of
##               --sort=none (-U) disables grouping
## 
##        -G, --no-group
##               in a long listing, don't print group names
## 
##        -h, --human-readable
##               with -l and -s, print sizes like 1K 234M 2G etc.
## 
##        --si   likewise, but use powers of 1000 not 1024
## 
##        -H, --dereference-command-line
##               follow symbolic links listed on the command line
## 
##        --dereference-command-line-symlink-to-dir
##               follow each command line symbolic link
## 
##               that points to a directory
## 
##        --hide=PATTERN
##               do not list implied entries matching shell  PATTERN  (overridden
##               by -a or -A)
## 
##        --hyperlink[=WHEN]
##               hyperlink file names; WHEN can be 'always' (default if omitted),
##               'auto', or 'never'
## 
##        --indicator-style=WORD
##               append indicator with style WORD to entry names: none (default),
##               slash (-p), file-type (--file-type), classify (-F)
## 
##        -i, --inode
##               print the index number of each file
## 
##        -I, --ignore=PATTERN
##               do not list implied entries matching shell PATTERN
## 
##        -k, --kibibytes
##               default  to  1024-byte  blocks for disk usage; used only with -s
##               and per directory totals
## 
##        -l     use a long listing format
## 
##        -L, --dereference
##               when showing file information for a symbolic link, show informa‐
##               tion  for  the file the link references rather than for the link
##               itself
## 
##        -m     fill width with a comma separated list of entries
## 
##        -n, --numeric-uid-gid
##               like -l, but list numeric user and group IDs
## 
##        -N, --literal
##               print entry names without quoting
## 
##        -o     like -l, but do not list group information
## 
##        -p, --indicator-style=slash
##               append / indicator to directories
## 
##        -q, --hide-control-chars
##               print ? instead of nongraphic characters
## 
##        --show-control-chars
##               show nongraphic characters as-is (the default, unless program is
##               'ls' and output is a terminal)
## 
##        -Q, --quote-name
##               enclose entry names in double quotes
## 
##        --quoting-style=WORD
##               use  quoting style WORD for entry names: literal, locale, shell,
##               shell-always,  shell-escape,  shell-escape-always,   c,   escape
##               (overrides QUOTING_STYLE environment variable)
## 
##        -r, --reverse
##               reverse order while sorting
## 
##        -R, --recursive
##               list subdirectories recursively
## 
##        -s, --size
##               print the allocated size of each file, in blocks
## 
##        -S     sort by file size, largest first
## 
##        --sort=WORD
##               sort  by  WORD instead of name: none (-U), size (-S), time (-t),
##               version (-v), extension (-X)
## 
##        --time=WORD
##               with -l, show time as WORD instead of default modification time:
##               atime  or  access  or  use  (-u); ctime or status (-c); also use
##               specified time as sort key if --sort=time (newest first)
## 
##        --time-style=TIME_STYLE
##               time/date format with -l; see TIME_STYLE below
## 
##        -t     sort by modification time, newest first
## 
##        -T, --tabsize=COLS
##               assume tab stops at each COLS instead of 8
## 
##        -u     with -lt: sort by, and show, access time; with -l:  show  access
##               time  and  sort  by name; otherwise: sort by access time, newest
##               first
## 
##        -U     do not sort; list entries in directory order
## 
##        -v     natural sort of (version) numbers within text
## 
##        -w, --width=COLS
##               set output width to COLS.  0 means no limit
## 
##        -x     list entries by lines instead of by columns
## 
##        -X     sort alphabetically by entry extension
## 
##        -Z, --context
##               print any security context of each file
## 
##        -1     list one file per line.  Avoid '\n' with -q or -b
## 
##        --help display this help and exit
## 
##        --version
##               output version information and exit
## 
##        The SIZE argument is an integer and  optional  unit  (example:  10K  is
##        10*1024).   Units  are  K,M,G,T,P,E,Z,Y  (powers  of 1024) or KB,MB,...
##        (powers of 1000).
## 
##        The TIME_STYLE argument can be  full-iso,  long-iso,  iso,  locale,  or
##        +FORMAT.   FORMAT  is  interpreted  like in date(1).  If FORMAT is FOR‐
##        MAT1&lt;newline&gt;FORMAT2, then FORMAT1 applies to non-recent files and FOR‐
##        MAT2  to  recent files.  TIME_STYLE prefixed with 'posix-' takes effect
##        only outside the POSIX locale.  Also the TIME_STYLE  environment  vari‐
##        able sets the default style to use.
## 
##        Using  color  to distinguish file types is disabled both by default and
##        with --color=never.  With --color=auto, ls emits color codes only  when
##        standard  output is connected to a terminal.  The LS_COLORS environment
##        variable can change the settings.  Use the dircolors command to set it.
## 
##    Exit status:
##        0      if OK,
## 
##        1      if minor problems (e.g., cannot access subdirectory),
## 
##        2      if serious trouble (e.g., cannot access command-line argument).
## 
## AUTHOR
##        Written by Richard M. Stallman and David MacKenzie.
## 
## REPORTING BUGS
##        GNU coreutils online help: &lt;https://www.gnu.org/software/coreutils/&gt;
##        Report ls translation bugs to &lt;https://translationproject.org/team/&gt;
## 
## COPYRIGHT
##        Copyright © 2018 Free Software Foundation, Inc.   License  GPLv3+:  GNU
##        GPL version 3 or later &lt;https://gnu.org/licenses/gpl.html&gt;.
##        This  is  free  software:  you  are free to change and redistribute it.
##        There is NO WARRANTY, to the extent permitted by law.
## 
## SEE ALSO
##        Full documentation at: &lt;https://www.gnu.org/software/coreutils/ls&gt;
##        or available locally via: info '(coreutils) ls invocation'
## 
## GNU coreutils 8.30                August 2018                            LS(1)
```

---

# Help (cont.)

I also like the [cheat](https://github.com/chrisallenlane/cheat) utility, which provides a more readable summary / cheatsheet of various command. You'll need to install it first. (Linux and MacOS only.)

```
$ cheat ls

## # Displays everything in the target directory
## ls path/to/the/target/directory
## 
## # Displays everything including hidden files
## ls -a
## 
## # Displays all files, along with the size (with unit suffixes) and timestamp
## ls -lh 
## 
## # Display files, sorted by size
## ls -S
## 
## # Display directories only
## ls -d */
## 
## # Display directories only, include hidden
## ls -d .*/ */
```

---
class: inverse, center, middle

# Files and folders
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---

# Navigation

- `pwd` to print (the current) working directory.

- `cd` to change directory.

You can use absolute paths, but it's better to use relative paths and invoke special symbols for a user's home folder (`~`), current directory (`.`), and parent directory (`..`) as needed. 


```bash
$ pwd
```

```
## /home/grant/Documents/Teaching/EC607/lectures/03-shell
```


```bash
$ cd examples ## Move into the "examples" sub-directory of this lecture directory.
$ cd ../.. ## Now go back up two directories.
$ pwd
```

```
## /home/grant/Documents/Teaching/EC607/lectures
```

---

# Navigation (cont.)

Beware of directory names that contain spaces. Say you have a directory called "My Documents". (I'm looking at you, Windows.)

- Why won't `$ cd My Documents` work?

--

**Answer:** Bash syntax is super pedantic about spaces and ordering. Here it thinks that "My" and "Documents" are separate arguments.

--

  - Small brain: Use quotation marks: `$ cd "My Documents"`.

  - Big brain: Use Tab completion to automatically "escape" the space: `$ cd My\ Documents`. 
  
  - Galaxy brain: Don't use spaces in file and folder names.

---

# Navigation (cont.)

&lt;div align="center"&gt;
&lt;img src="pics/expanding-brain.jpg" alt="Brain" height="550px"/&gt;
&lt;/div&gt;

---

# Listing files and their properties

We're about to go into more depth about the `ls` command.
- To do this effectively, it will be helpful if we're all working off the same group of files and folders.
- Navigate to the `exercises/` sub-directory of this lecture folder and list the files with the `-lh` option ("long format", "human readable").


```bash
$ cd examples ## Assumes you are starting off in the "03-shell" lecture folder
$ ls -lh
```

```
## total 144K
## drwxr-xr-x 2 grant users 4.0K Jan 12 22:12 ABC
## drwxr-xr-x 2 grant users 4.0K Jan 12 22:12 Bad folder name
## drwxrwxrwx 2 grant users 4.0K Jan 13 22:36 copies
## -rwxr-xr-x 1 grant users   48 Jan 12 22:13 hello.sh
## drwxr-xr-x 2 grant users 4.0K Jan 13 20:34 meals
## -rwxrwxrwx 1 grant users  153 Jan 12 21:20 reps.txt
## -rw-r--r-- 1 grant users 120K Jan 12 14:58 sonnets.txt
```

---

# Listing files and their properties (cont.)

What does this all mean? Let's focus on the top line.

```bash
drwxr-xr-x 2 grant users 4.0K Jan 12 22:12 ABC
```

---
count:false

# Listing files and their properties (cont.)

What does this all mean? Let's focus on the top line.

&lt;p span style="font-family:Fira Code; font-size:80%; color: #333; background: #f8f8f8; padding: 0.5em;";&gt;
&lt;span style='background: #ffff88;'&gt;d&lt;/span&gt;rwxr-xr-x 2 grant users 4.0K Jan 12 22:12 ABC&lt;/span&gt;

- The first column denotes the object type:
  - `d` (directory or folder), - `l` (link), or `-` (file)

---

count:false

# Listing files and their properties (cont.)

What does this all mean? Let's focus on the top line.

&lt;p span style="font-family:Fira Code; font-size:80%; color: #333; background: #f8f8f8; padding: 0.5em;";&gt;d&lt;span style='background: #ffff88;'&gt;&lt;span style='color: #e41a1c;'&gt;rwx&lt;/span&gt;&lt;span style='color: #377eb8;'&gt;r-x&lt;/span&gt;&lt;span style='color: #4daf4a;'&gt;r-x&lt;/span&gt;&lt;/span&gt; 2 grant users 4.0K Jan 12 22:12 ABC&lt;/span&gt;

- &lt;span style='color: #A9A9A9;'&gt;The first column denotes the object type:
  - `d` (directory or folder), - `l` (link), or `-` (file)&lt;/span&gt;
- Next, we see the permissions associated with the object's three possible user types: 1) &lt;span style='color: #e41a1c;'&gt;owner&lt;/span&gt;, 2) &lt;span style='color: #377eb8;'&gt;the owner's group&lt;/span&gt;, and 3) &lt;span style='color: #4daf4a;'&gt;all other users&lt;/span&gt;.
  - Permissions reflect `r` (read), `w` (write), or `x` (execute) access.
  - &lt;b&gt;`-`&lt;/b&gt; denotes missing permissions for a class of operations.

---
count:false

# Listing files and their properties (cont.)

What does this all mean? Let's focus on the top line.

&lt;p span style="font-family:Fira Code; font-size:80%; color: #333; background: #f8f8f8; padding: 0.5em;";&gt;drwxr-xr-x &lt;span style='background: #ffff88;'&gt;2&lt;/span&gt; grant users 4.0K Jan 12 22:12 ABC&lt;/span&gt;

- &lt;span style='color: #A9A9A9;'&gt;The first column denotes the object type:
  - `d` (directory or folder), - `l` (link), or `-` (file)&lt;/span&gt;
- &lt;span style='color: #A9A9A9;'&gt;Next, we see the permissions associated with the object's three possible user types: 1) owner, 2) the owner's group, and 3) all other users.
  - Permissions reflect `r` (read), `w` (write), or `x` (execute) access.
  - &lt;b&gt;`-`&lt;/b&gt; denotes missing permissions for a class of operations.&lt;/span&gt;
- The number of [hard links](http://www.giannistsakiris.com/2011/04/15/counting-and-listing-hard-links-on-linux/) to the object.

---
count:false

# Listing files and their properties (cont.)

What does this all mean? Let's focus on the top line.

&lt;p span style="font-family:Fira Code; font-size:80%; color: #333; background: #f8f8f8; padding: 0.5em;";&gt;drwxr-xr-x 2 &lt;span style='background: #ffff88;'&gt;&lt;span style='color: #e41a1c;'&gt;grant&lt;/span&gt; &lt;span style='color: #377eb8;'&gt;users&lt;/span&gt;&lt;/span&gt; 4.0K Jan 12 22:12 ABC&lt;/span&gt;

- &lt;span style='color: #A9A9A9;'&gt;The first column denotes the object type:
  - `d` (directory or folder), - `l` (link), or `-` (file)&lt;/span&gt;
- &lt;span style='color: #A9A9A9;'&gt;Next, we see the permissions associated with the object's three possible user types: 1) owner, 2) the owner's group, and 3) all other users.
  - Permissions reflect `r` (read), `w` (write), or `x` (execute) access.
  - &lt;b&gt;`-`&lt;/b&gt; denotes missing permissions for a class of operations.&lt;/span&gt;
- &lt;span style='color: #A9A9A9;'&gt;The number of hard links to the object.&lt;/span&gt;
- We also see the identity of the object's &lt;span style='color: #e41a1c;'&gt;owner&lt;/span&gt; and their &lt;span style='color: #377eb8;'&gt;group&lt;/span&gt;.

---
count:false

# Listing files and their properties (cont.)

What does this all mean? Let's focus on the top line.

&lt;p span style="font-family:Fira Code; font-size:80%; color: #333; background: #f8f8f8; padding: 0.5em;";&gt;drwxr-xr-x 2 grant users &lt;span style='background: #ffff88;'&gt;4.0K Jan 12 22:12 ABC&lt;/span&gt;&lt;/span&gt;

- &lt;span style='color: #A9A9A9;'&gt;The first column denotes the object type:
  - `d` (directory or folder), - `l` (link), or `-` (file)&lt;/span&gt;
- &lt;span style='color: #A9A9A9;'&gt;Next, we see the permissions associated with the object's three possible user types: 1) owner, 2) the owner's group, and 3) all other users.
  - Permissions reflect `r` (read), `w` (write), or `x` (execute) access.
  - &lt;b&gt;`-`&lt;/b&gt; denotes missing permissions for a class of operations.&lt;/span&gt;
- &lt;span style='color: #A9A9A9;'&gt;The number of hard links to the object.&lt;/span&gt;
- &lt;span style='color: #A9A9A9;'&gt;We also see the identity of the object's owner and their group.&lt;/span&gt;
- Finally, we see some descriptive elements about the object: 
  - Size, date and time of creation, and the object name.

---
count:false

# Listing files and their properties (cont.)

What does this all mean? Let's focus on the top line.

```bash
drwxr-xr-x 2 grant users 4.0K Jan 12 22:12 ABC
```

- The first column denotes the object type:
  - `d` (directory or folder), - `l` (link), or `-` (file)
- Next, we see the permissions associated with the object's three possible user types: 1) owner, 2) the owner's group, and 3) all other users.
  - Permissions reflect `r` (read), `w` (write), or `x` (execute) access.
  - &lt;b&gt;`-`&lt;/b&gt; denotes missing permissions for a class of operations.
- The number of hard links to the object.
- We also see the identity of the object's owner and their group.
- Finally, we see some descriptive elements about the object: 
  - Size, date and time of creation, and the object name.

&lt;/br&gt;
Note: We'll return to file permissions and ownership at the end of the lecture.

---

class: inverse, center, middle

# Manipulating files and directories
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---

# Create files and dirs: touch and mkdir

Let's take directories first. To create a directory use `mkdir`:

```bash
$ mkdir testing
```

To create (empty) files, we can use `touch`:

```bash
$ touch testing/test1.txt testing/test2.txt testing/test3.txt
```

Check that it worked

```bash
$ ls testing
```

```
## test1.txt
## test2.txt
## test3.txt
```

---

# Remove files and dirs: rm and rmdir

Let's delete the objects that we just created. Start with one of the .txt files, by using `rm`.
- We could delete all the files at the same time, but you'll see why I want to keep some.


```bash
$ rm testing/test1.txt
```

The equivalent command for directories is `rmdir`.

```bash
$ rmdir testing
```

```
## rmdir: failed to remove 'testing': Directory not empty
```

--

Uh oh... It won't let us delete the directory while it still has files inside of it. The solution is to use the `rm` command again with the "recursive" (`-r` or `-R`) and "force" (`-f`) options. 
- Excluding the `-f` option is safer, but will trigger a confirmation prompt for every file, which I'd rather avoid here.


```bash
$ rm -rf testing ## Success
```

---

# Copying files and directories: cp

The syntax for copying is `$ cp objectname (copyname)`
- If you don't provide a name for the copied object, it will just take the old name.
- However, if there is already an object with the same name in the target destination, then you'll have to use `-f` to force an overwrite.


```bash
$ ## Show that the "copies" sub-directory is empty
$ ls examples/copies
```


```bash
$ ## Now copy across a file (with a new name)
$ cp examples/reps.txt examples/copies/reps-copy.txt
$ ls examples/copies
```

```
## reps-copy.txt
```

--

You can use `cp` to copy directories, although you'll need the `-r` (or `-R`) flag if you want to recursively copy over everything inside of it to. 
- Try this by copying over the `meals/` directory to `copies/`.

---

# Moving and renaming files: mv 

The syntax for this command is `$ mv file (newfilename)` 
- Note that moving a file with the "newfilename" option is a convenient&lt;sup&gt;1&lt;/sup&gt; way to rename a file.


```bash
$  ## Rename reps-copy to reps2 by moving it with a new name
$ mv examples/copies/reps-copy.txt examples/copies/reps2.txt
$ ls examples/copies
```

```
## reps2.txt
```

.footnote[
&lt;sup&gt;1&lt;/sup&gt; Your convenience mileage may vary.
]

---

# Wildcards

[Wildcards](http://tldp.org/LDP/GNU-Linux-Tools-Summary/html/x11655.htm) are special characters that can be used as a replacement for other characters. The two most important ones are:

`*` replaces any number of characters. 
- Convenient when you want to copy, move, or delete a whole class of files.
  
  ```bash
  $ cp examples/*.sh examples/copies ## Copy any file with an .sh extension to "copies"
  $ rm examples/copies/* ## Delete everything in the "copies" directory
  ```
  
`?` replaces a single character. 
- Convenient when you want to discriminate between similarly named files.
  
  ```bash
  $ ls examples/meals/??nday.csv
  $ ls examples/meals/?onday.csv
  ```
  
  ```
  ## examples/meals/monday.csv
  ## examples/meals/sunday.csv
  ## examples/meals/monday.csv
  ```

???

We've already seen one wildcard in the form of the backlash (`\`) that was used to escape spaces in file and folder names, e.g. `$ cd My\ Documents`.

---

class: inverse, center, middle

# Working with text files
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---

# Added

- Regex
- Pipes
- wc (line, word, characters)
- Variables
- Functions and for loops
- Math?
- ssh
- top and htop

---
class: inverse, center, middle

# User roles and file permissions
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---

# Disclaimer

*This next section is tailored towards Unix-based operating systems, like Linux or MacOS. However, what we learn here will become relevant to everyone (even Windows users) once we start interacting with Linux servers, spinning up Docker containers, etc. later in the course.*

---

# The superuser: root, sudo, etc.

There are two main user roles on a Linux system:   
1. Normal users 
2. A superuser (AKA "root")

Difference is one of priviledge. 
- Superusers can make system changes, install software, browse through different users' home folders, etc. Normal users are much more restricted in what they can do.
- Explains why Unix-based OS's are much more resilient to security threats like viruses. Need superuser priviledges to install (potentially malicious) software.

---

# The superuser: root, sudo, etc. (cont.)

You *can* log in as the superuser&lt;sup&gt;1&lt;/sup&gt;... but this is generally considered very poor practice, since you needlessly risk messing up your system. 
- There are no safety checks and no "undo" options.

.footnote[
&lt;sup&gt;1&lt;/sup&gt; Hit "p" on this slide if you really want to know how.
]

???
To switch over to the superuser, you can type `sudo -s`.
- Note the extra visual cue: root's command prompt is a `#` (not a `$`).
  ```
  root@laptop:~#
  ```

Remember to type `exit` to switch back!

(Close these presenter notes by hitting "p" again.)

--

**Question:** How, then, can normal users perform meaningful system operations (including installing new programs and updating software)?

--

**Answer:** Invoke temporary superuser status with `sudo`.

- Stands for "superuser do".
- Simply prepend `sudo` to whatever command you want to run.

```bash
grant@laptop:~$ ls /root ## fails
grant@laptop:~$ sudo ls /root ## works
```

???

Note that you have to be a "permitted" user to invoke `sudo`. 
- This should be enabled by default on your personal laptop, but if not see [here](https://www.thegeekstuff.com/2010/09/sudo-command-examples/embed/) or [here](https://www.digitalocean.com/community/tutorials/how-to-create-a-sudo-user-on-ubuntu-quickstart).

---

# Changing permissions and ownership

Let's go back to the `ABC/` directory that we saw previously while exploring the ls command.

```bash
drwxr-xr-x 2 grant users 4.0K Jan 12 22:12  ABC
```

We can change the permissions and ownership of this folder with the `chmod` and `chown` commands, respectively.
- We'll review these in turn.
- Note that I'm going to use the "recursive" option (i.e. `-R`), but only because ABC is a folder. You can drop that when modifying individual files.


---

# chmod

Changing permissions using `chmod` depends on how those permissions are represented. 

There are two options: 1) Octal notation and 2) Symbolic notation. 
- We'll go into more detail on the next slide, but let's see some examples first.
- (Test the results yourself using the `ls -lh` command afterwards.)

--

**Example 1: rwxrwxrwx.** Read, write and execute permission for all users.
- Octal: `$ chmod -R 777 ABC`
- Symbolic: `$ chmod -R a=rwx ABC`

--

**Example 2: rwxr-xr-x.** Read, write and execute permission for the main user (i.e. owner) of the file. For all other users, read and execute permission only.
- Octal: `$ chmod -R 755 ABC`
- Symbolic: `$ chmod -R u=rwx,g=rx,o=rx ABC`

--

Now that we've seen some examples, let's get into the logic behind them.

---

# chmod (cont.)

### Octal notation

Takes advantage of the fact that `4` (for "read"), `2` (for "write"), and `1` (for "execute") can be combined in unambiguous ways.
- 7 (= 4 + 2 + 1) means read, write and execute permission.
- 5 (= 4 + 0 + 1) means read and execute permission, but not write permission.
- etc. 
- Note that Octal notation requires a number for each of the three user types: owner, owner's group, and all others. E.g. `$ chmod 777 myfile.txt`

### Symbolic notation

Links permissions to different symbols (i.e. abbreviations).
- Users: `u` ("User/owner"), `g` ("Group"), `o` ("Others""), `a` ("All")
- Permissions: `r` ("read"), `w` ("write"), `x` ("execute")
- Changes: `+` ("add permissions"), `-` ("remove permissions"), `=` ("set new permissions") 

---

# chmod (cont.)

Here's a quick comparison table with some common permission levels.

| Octal value | Symbolic value    | Permission level |
|:-----------:|:-----------------:|:----------------:|
| 777         | a+rwx             | rwxrwxrwx        |
| 770         | u+rwx,g+rwx,o-rwx | rwx------        |
| 755         | a+rwx,g=rw,o=rw   | rwxrwxrwx        |
| 700         | u+rwx,g-rwx,o-rwx | rwx------        |
| 644         | u=rw,g=r,o=r      | rw-r--r--        |


--

&lt;/br&gt; 

PS — Note the Symbolic method allows for relative changes, which means that you don't necessarily need to write out the whole entry in the table above. E.g. To go from the first line to the second line, you'd only need `$ chmod o-rwx myfile`.

---

# chown

Changing file ownership is somewhat easier than changing permissions, because you don't have to remember the different Octal and Symbolic notation mappings. 
- E.g. Say there is another user on your computer called "alice", then you could just assign her ownership of the ABC subfolder using:
 ```bash
 $ chown -R alice ABC
 ```

Things get a little more interesting when we want to add new users and groups, or change an existing users group.
- I'll save that for a later lecture on cloud servers, though.

---

class: inverse, center, middle

# Next steps
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;

---

# Next steps

### Exercises

Open up the "exercises" subfolder associated with this lecture. I want you to try and play around with the contents using some of the different Bash commands we've practiced today.
- Change the permissions on an indivdual file or a whole directory.
- Read in some lines of text and pipe them to another file.
- Count the number of times Shakespeare refers to "mistress" or "love" in his Sonnets.
- Merge the separate CSVs in the "meals" subfolder into one document.
- Write a new bash script and execute it.
- Etc.

### Further reading

- [The Unix Shell](http://swcarpentry.github.io/shell-novice/) (Software Carpentery)
- [The Unix Workbench](https://seankross.com/the-unix-workbench/) (Sean Kross)


---
class: inverse, center, middle

# Next class: *R* language basics
&lt;html&gt;&lt;div style='float:left'&gt;&lt;/div&gt;&lt;hr color='#EB811B' size=1px width=796px&gt;&lt;/html&gt;
    </textarea>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"highlightSpans": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
